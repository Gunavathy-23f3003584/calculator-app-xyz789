<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .calculator {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            width: 320px; /* Fixed width for a compact calculator */
            padding: 20px;
            text-align: center;
        }
        #calculator-display {
            width: 100%;
            height: 60px;
            font-size: 2.2em;
            text-align: right;
            margin-bottom: 20px;
            padding: 10px 15px;
            border: none;
            border-radius: 10px;
            background-color: #e9ecef;
            color: #333;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
            pointer-events: none; /* Prevent input via keyboard */
            overflow: hidden; /* Hide overflow text */
            white-space: nowrap; /* Prevent text wrapping */
            text-overflow: ellipsis; /* Add ellipsis for overflow */
        }
        .calculator-buttons .btn {
            width: 100%;
            height: 60px;
            font-size: 1.5em;
            border-radius: 10px;
            transition: all 0.2s ease-in-out;
        }
        /* Custom spacing for buttons using Bootstrap's gutter classes */
        .calculator-buttons .col-3, .calculator-buttons .col-6 {
            padding: 5px; /* Consistent padding around buttons */
        }

        .calculator-buttons .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
            color: #fff;
        }
        .calculator-buttons .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }
        .calculator-buttons .btn-info { /* For operators */
            background-color: #17a2b8;
            border-color: #17a2b8;
            color: #fff;
        }
        .calculator-buttons .btn-info:hover {
            background-color: #138496;
            border-color: #117a8b;
        }
        .calculator-buttons .btn-success { /* For equals */
            background-color: #28a745;
            border-color: #28a745;
            color: #fff;
        }
        .calculator-buttons .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }
        .calculator-buttons .btn-danger { /* For clear */
            background-color: #dc3545;
            border-color: #dc3545;
            color: #fff;
        }
        .calculator-buttons .btn-danger:hover {
            background-color: #c82333;
            border-color: #bd2130;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <input type="text" id="calculator-display" value="0" readonly>
        <div class="calculator-buttons container-fluid">
            <div class="row gx-2 gy-2"> <!-- Use Bootstrap's gutter classes for consistent spacing -->
                <div class="col-6">
                    <button type="button" class="btn btn-danger" id="clear-btn">C</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-info operator-btn" id="divide-btn">/</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-info operator-btn" id="multiply-btn">*</button>
                </div>

                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="seven-btn">7</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="eight-btn">8</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="nine-btn">9</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-info operator-btn" id="subtract-btn">-</button>
                </div>

                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="four-btn">4</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="five-btn">5</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="six-btn">6</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-info operator-btn" id="add-btn">+</button>
                </div>

                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="one-btn">1</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="two-btn">2</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary number-btn" id="three-btn">3</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-success" id="equals-btn">=</button>
                </div>
                
                <div class="col-6">
                    <button type="button" class="btn btn-secondary number-btn" id="zero-btn">0</button>
                </div>
                <div class="col-3">
                    <button type="button" class="btn btn-secondary" id="decimal-btn">.</button>
                </div>
                <!-- The last col-3 is implicitly empty for visual balance -->
            </div>
        </div>
    </div>

    <!-- Bootstrap JS CDN (optional, not strictly needed for this basic app but good practice) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        const display = document.getElementById('calculator-display');
        let currentInput = '0';
        let previousInput = null;
        let operator = null;
        let waitingForSecondOperand = false; // True after operator, next number is second operand

        function updateDisplay() {
            // Ensure display does not overflow aggressively, and handle 'Error'
            if (currentInput === 'Error') {
                display.value = currentInput;
            } else if (currentInput.length > 12) { 
                // Attempt to display large numbers using scientific notation or precision
                const num = parseFloat(currentInput);
                if (isNaN(num)) {
                    display.value = 'Error';
                } else if (num.toString().length > 12) { // Check length of num.toString() to avoid re-overflowing
                    display.value = num.toPrecision(8); // Use toPrecision for large numbers
                } else {
                    display.value = currentInput;
                }
            } else {
                display.value = currentInput;
            }
        }

        function clearAll() {
            currentInput = '0';
            previousInput = null;
            operator = null;
            waitingForSecondOperand = false;
            updateDisplay();
        }

        function handleNumber(number) {
            if (currentInput === 'Error') { // If error is displayed, clear and start new input
                clearAll();
            }
            if (waitingForSecondOperand) {
                currentInput = number;
                waitingForSecondOperand = false;
            } else {
                // Prevent multiple leading zeros unless it's "0."
                if (currentInput === '0' && number !== '0') {
                    currentInput = number;
                } else if (currentInput === '0' && number === '0') {
                    // Do nothing, keep '0'
                }
                else {
                    currentInput += number;
                }
            }
            updateDisplay();
        }

        function handleDecimal() {
            if (currentInput === 'Error') {
                clearAll();
            }
            if (waitingForSecondOperand) {
                currentInput = '0.';
                waitingForSecondOperand = false;
            } else if (!currentInput.includes('.')) {
                currentInput += '.';
            }
            updateDisplay();
        }

        function handleOperator(nextOperator) {
            if (currentInput === 'Error') {
                return; // Do nothing if in error state
            }
            const inputValue = parseFloat(currentInput);

            if (previousInput === null && !isNaN(inputValue)) {
                previousInput = inputValue;
            } else if (operator && !waitingForSecondOperand && !isNaN(inputValue)) {
                const result = calculate(previousInput, operator, inputValue);
                if (result === 'Error') {
                    currentInput = 'Error';
                    previousInput = null;
                    operator = null;
                    waitingForSecondOperand = false;
                    updateDisplay();
                    return;
                }
                currentInput = String(result);
                previousInput = result;
            }
            
            waitingForSecondOperand = true;
            operator = nextOperator;
            updateDisplay(); // Display intermediate result or current input
        }

        function calculate(num1, op, num2) {
            // Ensure num1 and num2 are numbers before parsing
            num1 = parseFloat(num1);
            num2 = parseFloat(num2);

            if (isNaN(num1) || isNaN(num2)) {
                return 'Error'; 
            }

            let result;
            switch (op) {
                case '+':
                    result = num1 + num2;
                    break;
                case '-':
                    result = num1 - num2;
                    break;
                case '*':
                    result = num1 * num2;
                    break;
                case '/':
                    if (num2 === 0) {
                        alert("Error: Division by zero!");
                        return 'Error';
                    }
                    result = num1 / num2;
                    break;
                default:
                    return num2; 
            }
            // Round to avoid floating point inaccuracies for basic operations
            // e.g., 0.1 + 0.2 = 0.30000000000000004
            return parseFloat(result.toFixed(10)); 
        }

        function handleEquals() {
            if (currentInput === 'Error' || operator === null || waitingForSecondOperand) {
                return; // Nothing to calculate or in error state or operator not set
            }

            const inputValue = parseFloat(currentInput);
            const result = calculate(previousInput, operator, inputValue);

            if (result === 'Error') {
                currentInput = 'Error';
            } else {
                currentInput = String(result);
            }
            
            previousInput = null;
            operator = null;
            waitingForSecondOperand = true; // After equals, next number starts a new calculation
            updateDisplay();
        }

        // Event Listeners
        document.querySelectorAll('.number-btn').forEach(button => {
            button.addEventListener('click', (event) => handleNumber(event.target.textContent));
        });

        document.querySelectorAll('.operator-btn').forEach(button => {
            button.addEventListener('click', (event) => handleOperator(event.target.textContent));
        });

        document.getElementById('decimal-btn').addEventListener('click', handleDecimal);
        document.getElementById('clear-btn').addEventListener('click', clearAll);
        document.getElementById('equals-btn').addEventListener('click', handleEquals);

        // Initialize display
        updateDisplay();
    </script>
</body>
</html>